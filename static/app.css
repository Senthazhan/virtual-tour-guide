/* ========== Base (shared) ========== */
:root{
  --bg1:#3b82f6; --bg2:#8b5cf6; --bg3:#06b6d4;
  --text:#1e293b; --muted:#64748b; --light:#f1f5f9;
  --border:#e2e8f0; --soft:#f8fafc;
  --ring:#3b82f6; --success:#10b981; --warning:#f59e0b; --danger:#ef4444;
  --shadow: 0 20px 40px rgba(15,23,42,.08), 0 4px 12px rgba(15,23,42,.04);
  --elev: 0 12px 28px rgba(15,23,42,.06), 0 2px 8px rgba(15,23,42,.03);
  --gradient-primary: linear-gradient(135deg, #3b82f6, #8b5cf6, #06b6d4);
  --gradient-success: linear-gradient(135deg, #10b981, #059669);
  --gradient-warm: linear-gradient(135deg, #f59e0b, #d97706);
}
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{ font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text); margin:0; }

/* ========== CHAT PAGE ONLY ========== */
body.chat-page{ 
  background: 
    radial-gradient(1400px 700px at -15% -15%, rgba(59,130,246,.12), transparent 65%),
    radial-gradient(1000px 600px at 115% -15%, rgba(139,92,246,.10), transparent 65%),
    radial-gradient(800px 500px at 50% 100%, rgba(6,182,212,.08), transparent 70%),
    linear-gradient(180deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
  min-height: 100vh;
}
.container{ max-width: 1200px; margin: 20px auto 40px; padding: 0 20px; display:grid; gap:20px; }
.layout{ grid-template-columns: 340px 1fr; align-items:start; }
.layout.split{ grid-template-columns: 1fr 1fr; }
/* Split mode: edge-to-edge, no gaps */
.container.layout.split{ max-width: 100%; margin: 0 auto; padding: 0; gap: 0; }
.layout.split #chat-panel.glass-card,
.layout.split #images-pane.glass-card{ padding: 0; border-radius: 0; border: 0; box-shadow: none; }
body.split-open{ overflow: hidden; }
.layout.split .chat-card{ height: calc(100vh - 80px); }
.layout.split .chat-messages{ flex:1; min-height:0; height:auto; max-height:none; }
.layout.split .composer{ padding: 12px; }
.layout.split .footer-note{ display:none; }
.glass-card{ 
  background: rgba(255,255,255,.75); 
  backdrop-filter: blur(20px); 
  border: 1px solid rgba(255,255,255,.8); 
  border-radius: 20px; 
  box-shadow: var(--shadow); 
  padding: 20px; 
  transition: all 0.3s ease;
}
.glass-card:hover{ 
  transform: translateY(-2px); 
  box-shadow: 0 25px 50px rgba(15,23,42,.12), 0 8px 20px rgba(15,23,42,.06);
}
.glass-sub{ 
  background: rgba(255,255,255,.65); 
  border: 1px solid rgba(255,255,255,.9); 
  border-radius: 16px; 
  padding: 16px; 
  margin-top: 16px; 
  box-shadow: var(--elev);
}
.sidebar{ position:sticky; top:90px; height:calc(100vh - 120px); overflow:auto; }
.site-header{
  position:sticky; top:0; z-index:10; 
  background: rgba(255,255,255,.95); 
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 16px 20px; 
  display:flex; 
  justify-content:space-between; 
  align-items:center;
  box-shadow: 0 8px 32px rgba(15,23,42,.08);
}
.brand{ display:flex; gap:12px; align-items:center; }
.logo{ 
  width:40px; height:40px; 
  border-radius:12px; 
  background: var(--gradient-primary); 
  color:#fff; 
  display:grid; 
  place-items:center; 
  box-shadow: 0 8px 20px rgba(59,130,246,.3);
  transition: all 0.3s ease;
}
.logo:hover{ 
  transform: scale(1.05); 
  box-shadow: 0 12px 28px rgba(59,130,246,.4);
}
.brand-text .sub{ color:var(--muted); font-size:.9rem; font-weight:500; }
.header-nav{ display:flex; gap:16px; align-items:center; }
.header-nav .link{ 
  color:var(--bg2); 
  text-decoration:none; 
  font-weight:600; 
  padding:.5rem 1rem; 
  border-radius:12px; 
  transition: all 0.3s ease;
  background: rgba(139,92,246,.1);
}
.header-nav .link:hover{ 
  background: rgba(139,92,246,.2); 
  transform: translateY(-1px);
}

/* Card */
.card{ 
  background: rgba(255,255,255,.9); 
  border: 1px solid var(--border); 
  border-radius: 18px; 
  padding: 20px; 
  box-shadow: var(--elev);
  transition: all 0.3s ease;
}
.card:hover{ 
  transform: translateY(-2px); 
  box-shadow: 0 16px 32px rgba(15,23,42,.1);
}
.card-title{ 
  margin:0 0 12px 0; 
  font-size:1.1rem; 
  font-weight:600; 
  color: var(--text);
}

/* Chips / quick prompts */
.chip-row{ display:flex; flex-wrap:wrap; gap:12px; }
.chip{ 
  border: 1px solid var(--border); 
  background: rgba(255,255,255,.9); 
  padding:.6rem 1rem; 
  border-radius: 25px; 
  cursor:pointer; 
  font-size:.9rem; 
  font-weight:500;
  box-shadow: 0 4px 12px rgba(15,23,42,.06); 
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}
.chip::before{
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: var(--gradient-primary);
  opacity: 0;
  transition: all 0.3s ease;
  z-index: -1;
}
.chip:hover{ 
  background: var(--gradient-primary);
  color: white;
  transform: translateY(-2px); 
  box-shadow: 0 8px 24px rgba(59,130,246,.25);
  border-color: transparent;
}
.chip:hover::before{
  left: 0;
  opacity: 1;
}

/* Chat box */
.chat-card{ display:flex; flex-direction:column; gap:16px; }
/* Images pane */
.images-pane{ display:flex; flex-direction:column; height:100%; }
.chat-messages{
  min-height: 450px; max-height: 68vh; overflow:auto;
  background: linear-gradient(180deg, rgba(255,255,255,.8), rgba(255,255,255,.6));
  border: 1px solid rgba(255,255,255,.9); 
  border-radius: 20px; 
  padding: 20px;
  box-shadow: var(--elev);
}
.bubble{
  position: relative;
  width: fit-content; 
  max-width: 85%; 
  padding: 1rem 1.2rem 1rem 2.5rem; 
  border-radius: 20px; 
  margin: .75rem 0; 
  line-height: 1.6;
  box-shadow: 0 6px 20px rgba(15,23,42,.08);
  transition: all 0.3s ease;
}
.bubble:hover{
  transform: translateY(-1px);
  box-shadow: 0 8px 25px rgba(15,23,42,.12);
}
.user{ 
  background: var(--gradient-primary); 
  color: white; 
  margin-left: auto; 
  border: none;
}
.bot{ 
  background: linear-gradient(135deg, #f0f9ff, #e0f2fe); 
  border: 1px solid #bae6fd; 
  color: var(--text);
}
.bubble.user::before,.bubble.bot::before{
  content:""; 
  position:absolute; 
  left:.8rem; 
  top:.8rem; 
  width:24px; 
  height:24px; 
  border-radius:50%;
  background: rgba(255,255,255,.2); 
  box-shadow: inset 0 0 0 2px rgba(255,255,255,.3);
}
.bubble.bot::before{ 
  background: var(--gradient-primary); 
  box-shadow: inset 0 0 0 2px #fff;
}

/* typing indicator */
.bubble.typing{ 
  display:inline-flex; 
  gap:8px; 
  align-items:center; 
  padding: 1rem 1.2rem;
}
.dot{ 
  width:10px; 
  height:10px; 
  border-radius:50%; 
  background: var(--gradient-primary); 
  display:inline-block; 
  animation:bounce 1.2s infinite ease-in-out; 
}
.dot:nth-child(2){ animation-delay:.2s; }
.dot:nth-child(3){ animation-delay:.4s; }
@keyframes bounce{ 
  0%,80%,100%{transform:translateY(0);opacity:.6} 
  40%{transform:translateY(-8px);opacity:1} 
}

/* Composer */
.composer{ display:flex; gap:12px; align-items:flex-end; }
.input{
  flex:1; 
  resize:vertical; 
  min-height:52px; 
  max-height:180px;
  padding: 1rem 1.2rem; 
  border: 2px solid rgba(255,255,255,.8); 
  border-radius: 16px; 
  outline:0; 
  background: rgba(255,255,255,.9); 
  font-size: 1rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(15,23,42,.06);
}
.input:focus{ 
  border-color: var(--ring); 
  box-shadow: 0 0 0 4px rgba(59,130,246,.2), 0 8px 20px rgba(15,23,42,.1);
  transform: translateY(-1px);
}

.btn-primary{
  background: var(--gradient-primary); 
  color:#fff; 
  font-weight:700;
  border:0; 
  border-radius:16px; 
  padding: 1rem 1.5rem; 
  min-width:120px; 
  box-shadow: 0 8px 24px rgba(59,130,246,.3);
  transition: all 0.3s ease;
  cursor: pointer;
}
.btn-primary:hover{ 
  transform: translateY(-2px); 
  box-shadow: 0 12px 32px rgba(59,130,246,.4);
}
.btn-primary:active{ 
  transform: translateY(0px); 
}

.footer-note{ 
  color:var(--muted); 
  font-size:.9rem; 
  text-align: center;
  padding: 8px 0;
  font-style: italic;
}

/* Chat History Styles */
.chat-history {
  margin-top: 16px;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.status-title {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 12px;
  font-size: 0.95rem;
  padding: 0 4px;
}

.history-list {
  flex: 1;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(59,130,246,.3) transparent;
  padding: 8px;
  max-height: calc(100vh - 200px);
  min-height: 150px;
}

.history-list::-webkit-scrollbar {
  width: 6px;
}

.history-list::-webkit-scrollbar-track {
  background: transparent;
}

.history-list::-webkit-scrollbar-thumb {
  background: var(--gradient-primary);
  border-radius: 3px;
}

.history-item {
  transition: all 0.3s ease;
  margin-bottom: 8px;
  padding: 12px 14px;
  background: rgba(255,255,255,0.7);
  border: 1px solid rgba(255,255,255,0.5);
  border-radius: 12px;
  cursor: pointer;
  font-size: 0.9rem;
  line-height: 1.4;
  word-wrap: break-word;
  position: relative;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.history-item:hover {
  background: rgba(59,130,246,0.15) !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(59,130,246,0.2);
  border-color: rgba(59,130,246,0.3);
}

.history-item:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(59,130,246,0.15);
}

/* Make sidebar take full height */
.sidebar {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 120px);
}

.sidebar .glass-card {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.sidebar-content {
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 16px;
}

.quick-prompts-section {
  flex-shrink: 0;
}

.chat-history {
  flex: 1;
  min-height: 200px;
  display: flex;
  flex-direction: column;
}

.status {
  flex-shrink: 0;
}

/* Scrollbars */
.chat-messages{ 
  scrollbar-width: thin; 
  scrollbar-color: rgba(59,130,246,.3) transparent; 
}
.chat-messages::-webkit-scrollbar{ 
  height:8px; 
  width:8px; 
}
.chat-messages::-webkit-scrollbar-track{ 
  background:rgba(255,255,255,.2); 
  border-radius: 4px;
}
.chat-messages::-webkit-scrollbar-thumb{ 
  background: var(--gradient-primary); 
  border-radius: 4px; 
  transition: all 0.3s ease;
}
.chat-messages::-webkit-scrollbar-thumb:hover{ 
  background: var(--gradient-primary);
  transform: scale(1.1);
}

/* Responsive */
@media (max-width: 768px){
  .container{ 
    margin: 15px auto 30px; 
    padding: 0 15px;
  }
  .layout{ 
    grid-template-columns: 1fr; 
    gap: 15px;
  }
  .sidebar{ 
    position:relative; 
    top:auto; 
    height:auto; 
    order: 2;
  }
  .chat-card{
    order: 1;
  }
  .glass-card{
    padding: 16px;
  }
  .bubble{
    max-width: 90%;
    padding: .8rem 1rem .8rem 2rem;
  }
  .site-header{
    padding: 12px 15px;
  }
}

/* ========== LOGIN PAGE ========== */
body.auth-page{
  margin:0; padding:0; max-width:none;
  min-height:100vh; display:grid; place-items:center;
  background: 
    radial-gradient(1400px 700px at 10% 10%, rgba(59,130,246,.15), transparent 65%),
    radial-gradient(1000px 600px at 90% 20%, rgba(139,92,246,.12), transparent 65%),
    radial-gradient(800px 500px at 50% 100%, rgba(6,182,212,.08), transparent 70%),
    linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
}
.auth-wrap{ 
  width:min(900px, 92vw); 
  padding: clamp(20px, 4vw, 40px); 
}
.auth-card{
  background: rgba(255,255,255,.85); 
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,.8);
  border-radius: 24px; 
  padding: clamp(24px, 4vw, 36px);
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}
.auth-card:hover{
  transform: translateY(-4px);
  box-shadow: 0 25px 50px rgba(15,23,42,.15);
}
.brand{ gap:16px; }
h1{ 
  font-size: clamp(24px, 2.5vw, 32px); 
  margin:0; 
  font-weight:700;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.muted{ 
  color:var(--muted); 
  margin:.5rem 0 0 0; 
  font-size: 1rem;
  font-weight: 500;
}
.alert{
  background: linear-gradient(135deg, #fef2f2, #fee2e2); 
  color:#991b1b; 
  border: 1px solid #fecaca;
  padding: 1rem 1.2rem; 
  border-radius: 12px; 
  margin: 1rem 0 1.5rem 0; 
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(239,68,68,.1);
}
.auth-form{ 
  display:grid; 
  gap:1.2rem; 
  margin-top:1rem; 
}
.field > span{ 
  display:block; 
  font-size:1rem; 
  color:var(--muted); 
  margin-bottom:.5rem; 
  font-weight: 600;
}
.input-group{
  display:flex; 
  align-items:center; 
  gap:.75rem;
  background: rgba(255,255,255,.9); 
  border: 2px solid var(--border); 
  border-radius: 16px; 
  padding: 1rem 1.2rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(15,23,42,.06);
}
.input-group:focus-within{ 
  border-color: var(--ring); 
  box-shadow: 0 0 0 4px rgba(59,130,246,.2), 0 8px 20px rgba(15,23,42,.1);
  transform: translateY(-1px);
}
.input-group input{ 
  flex:1; 
  border:0; 
  outline:0; 
  font-size:1rem; 
  background:transparent; 
  color: var(--text);
  font-weight: 500;
}
.icon{ 
  opacity:.8; 
  font-size: 1.2rem;
}
.ghost{ 
  border:0; 
  background:transparent; 
  padding:.5rem .75rem; 
  border-radius:10px; 
  transition: all 0.3s ease;
  cursor: pointer;
}
.ghost:hover{ 
  background: rgba(59,130,246,.1); 
  transform: scale(1.05);
}
.row-between{ 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  gap:.8rem; 
}
.check{ 
  display:flex; 
  align-items:center; 
  gap:.6rem; 
  color:var(--muted); 
  font-size:1rem; 
  font-weight: 500;
}
.link{ 
  color: var(--bg2); 
  text-decoration: none; 
  font-weight:600; 
  transition: all 0.3s ease;
  padding: .25rem .5rem;
  border-radius: 8px;
}
.link:hover{ 
  background: rgba(139,92,246,.1);
  transform: translateY(-1px);
}
.btn-primary:active{ 
  transform: translateY(1px); 
}
.fineprint{ 
  margin-top:1.5rem; 
  color:var(--muted); 
  font-size:.9rem; 
  text-align: center;
  line-height: 1.5;
}